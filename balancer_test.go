package keyva

import (
	. "gopkg.in/check.v1"
)

var neighbourValues = ValueSlice{
	{0, MustHash("0033F3A564EA5A6A5DA1CA4C13DE4243081771717FFFB0D81CF7ACC75652063F"), []byte(nil)},
	{0, MustHash("0044F9B447A1F677E92BFCA281C9A1B15CDD98B5B1032C54E173E76D2DE27A71"), []byte(nil)},
	{0, MustHash("008F2D4343ACDDB1B3A44BE0EC3EB624C1F921FBFB58A8F3A1B4EA749CDD72ED"), []byte(nil)},
	{0, MustHash("010368116F73952808ED4C4E580C4CF9C0C231B047F616A031A404076DC817CC"), []byte(nil)},
	{0, MustHash("011974AD2AF411A6650DB7591DFFB51C645388F78FFC1BBCD73AE2C860602559"), []byte(nil)},
}

var neighbourTargets = []Target{
	{0, MustHash("005934E7B801DF043BAF82793BB3ED424028FFEBFDFC968BA3D90C020038AEC7")},
	{1, MustHash("00B269CF7003BE08775F04F27767DA848051FFD7FBF92D1747B2180400715D8D")},
	{2, MustHash("010B9EB728059D0CB30E876BB31BC7C6C07AFFC3F9F5C3A2EB8B240600AA0C53")},
	{3, MustHash("0164D39EE0077C10EEBE09E4EECFB50900A3FFAFF7F25A2E8F64300800E2BB19")},
	{4, MustHash("01BE088698095B152A6D8C5E2A83A24B40CCFF9BF5EEF0BA333D3C0A011B69DF")},
	{5, MustHash("02173D6E500B3A19661D0ED766378F8D80F5FF87F3EB8745D716480C015418A5")},
	{6, MustHash("02707256080D191DA1CC9150A1EB7CCFC11EFF73F1E81DD17AEF540E018CC76B")},
	{7, MustHash("02C9A73DC00EF821DD7C13C9DD9F6A120147FF5FEFE4B45D1EC8601001C57631")},
}

var balancers = []Balancer{
	&NaiveBalancer{},
	&MatchingBalancer{},
}

func (s *KeyVaSuite) TestBalancers(c *C) {
	for _, balancer := range balancers {
		node := &Node{
			Start: MustHash("0000000000000000000000000000000000000000000000000000000000000001"),
			End:   MustHash("0300000000000000000000000000000000000000000000000000000000000000"),
		}
		neighbours := balancer.Balance(node, neighbourValues)
		neighbours.Sort()
	}
}
